block variables
doctype html
html.has-navbar-fixed-top.custom-scrollbar(lang="en" style="overflow-x: hidden; overflow-y: auto;")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title #{title || "Home"} - Vocabustudy
        meta(property="og:title" content=`${title || "Home"} - Vocabustudy`)
        meta(property="og:description" content=`${description || "Study and build vocabulary for free"}`)
        meta(name="description" content=`${description || "Study and build vocabulary for free"}`)
        meta(property="og:type" content="website")
        meta(property="og:image" content="./og_banner.png")
        meta(property="og:site_name" content="Vocabustudy")
        link(rel="icon" href="icons/favicon.ico" sizes="any")
        link(rel="apple-touch-icon" href="icons/apple-touch-icon.png")
        block main-stylesheet
            link(rel="stylesheet" href="css/styles.scss")
        link(rel="stylesheet" href="css/bulma-styles.scss")
        link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200")
        link(rel="preconnect" href="https://fonts.googleapis.com")
        link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
        link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap")
        link(rel="manifest" href="./app.webmanifest")
        script(src="js/sentry.js" type="module" async)
        script(type="application/ld+json").
            {
                "@context": "https://schema.org",
                "@type": "WebApplication",
                "name": "Vocabustudy",
                "applicationCategory": "BrowserApplication,EducationalApplication",
                "operatingSystem": "Browser",
                "offers": {
                    "@type": "Offer",
                    "price": "0"
                }
            }
        script(type="application/ld+json").
            {
                "@context": "https://schema.org",
                "@type": "WebSite",
                "name": "Vocabustudy",
                "url": "https://vocabustudy.org/"
            }
        block extrahead
    body
        block navbar
            nav.navbar.is-primary.is-fixed-top(role="navigation" aria-label="main navigation")
                .navbar-brand.is-justify-content-space-between
                    a.navbar-item(href="/#")
                        img.nohuechange(src="icons/icon-192.png" height="28" style="border: 1px solid #fff8; border-radius: 0.5rem;" alt="Navbar Vocabustudy Logo")
                    a.navbar-burger(role="button" aria-label="menu" aria-expanded="false" data-target="main-navbar")
                        span.has-background-white(aria-hidden="true")
                        span.has-background-white(aria-hidden="true")
                        span.has-background-white(aria-hidden="true")
                #main-navbar.navbar-menu
                    .navbar-start
                        a.navbar-item(href="/#") Home
                        a.navbar-item(href="/#search") Browse Sets
                        a.navbar-item(href="/#donate") Donate
                        a.navbar-item(href="/help-center/") Help
                    .navbar-end
                        .navbar-item.has-dropdown.is-hoverable
                            a.navbar-link.is-arrowless 
                                i.material-symbols-rounded.is-filled.is-hidden-touch account_circle
                                span.is-hidden-desktop Account
                                i.material-symbols-rounded.is-hidden-touch arrow_drop_down
                            .navbar-dropdown.is-right.is-centered(style="border-top-left-radius: 6px;")
                                a.navbar-item(href="/#saved-sets") Saved Sets
                                a.navbar-item.loggedin(hidden href="/#mysets") My Sets
                                a.navbar-item.loggedin.adminonly(hidden href="/#admin") Admin Portal
                                hr.navbar-divider
                                a.navbar-item.loggedin(hidden href="/#account") My Account
                                span#btn-logout.navbar-item.is-clickable.loggedin(hidden) Log Out
                                a.navbar-item.loggedout(hidden href="/#login") Log In
        main
            block content
        .fab-theme-container
            button.button.is-primary-alt.fab-theme.is-floating(aria-label="Theme" title="Change Theme")
                i(style="font-size: 1.5rem; ").material-symbols-rounded.has-text-white.is-filled light_mode
            div
                button.button.is-primary.fab-theme.is-floating(aria-label="Theme" title="System")
                    i.material-symbols-rounded.is-filled brightness_4
                button.button.is-primary.fab-theme.is-floating(aria-label="Theme" title="Dark")
                    i.material-symbols-rounded.is-filled dark_mode
                button.button.is-primary.fab-theme.is-floating(aria-label="Light" title="Light")
                    i.material-symbols-rounded.is-filled light_mode
                button.button.is-primary.fab-theme.is-floating.btn-change-hue(hidden aria-label="Hue" title="Set Hue")
                    i.material-symbols-rounded.is-filled palette
        footer.footer.level.is-mobile(style="position: relative;")
            p.level-item
                a(href="https://github.com/For-0/vocabustudy/releases") #[span.mr-1 #[span.tag.is-secondary v#{process.env.npm_package_version}]]
                span.is-hidden-mobile.mr-1  | &copy; 2022-2023 Siddhant K. All Rights Reserved
                | - 
                a.has-text-white.is-underlined.ml-1(href="/#credits") Credits
            .level-item
                div.is-hidden-mobile
                    a.has-text-white.is-underlined(href="/privacy/") Privacy Policy
                    |  | 
                    a.has-text-white.is-underlined(href="/#youtube") YouTube
                    |  | 
                    a.has-text-white.is-underlined(href="/#discord") Discord
                .is-hidden-tablet(style="transform: scale(0.8);")
                    a.has-text-white.mr-3.is-filled.icon(href="/privacy/" title="Privacy")
                        i.material-symbols-rounded verified_user
                    a.has-text-white.mr-3.is-filled.icon(href="/#youtube" title="YouTube")
                        i.material-symbols-rounded subscriptions
                    a.has-text-white.mr-3.is-filled.icon(href="/#discord" title="Discord")
                        img.credits-brandicons(src="icons/brands/discord.svg" style="height: 1.5rem; width: 1.5rem;" alt="Discord")
        block scripts-footer
            script.
                console.info("%cOrchestra is better than Band*\n%c*But Art is the best", "background-color: #795548; color: white; font-size: 96px; font-weight: bold; border-radius: 4px; font-style: italic;", "font-size: 12px; font-style: italic;");
                if (location.host === "vocabustudyonline.web.app" && !localStorage.getItem("use_vocabustudyonline")) location.host = "vocabustudy.org";
                const navbar = {
                    btnLogout: document.getElementById("btn-logout"),
                    burger: document.querySelector(".navbar-burger"),
                    menu: document.getElementById("main-navbar")
                };
                const fabs = {
                    theme: document.querySelector(".fab-theme"),
                    themeContainer: document.querySelector(".fab-theme-container"),
                    themeOptions: document.querySelectorAll(".fab-theme-container > div button:not(:last-child)")
                };
                showTheme(localStorage.getItem("theme"));
                setHue(localStorage.getItem("theme_hue"));
                const themes = ["system", "dark", "light"];
                function showTheme(theme) {
                    document.documentElement.classList.remove("theme-dark", "theme-system");
                    switch(theme) {
                        case "dark":
                            fabs.theme.querySelector("i").innerText = "dark_mode";
                            document.documentElement.classList.add("theme-dark");
                            break;
                        case "system":
                            fabs.theme.querySelector("i").innerText = "brightness_4";
                            document.documentElement.classList.add("theme-system");
                            break;
                        case "light":
                            fabs.theme.querySelector("i").innerText = "light_mode";
                            break;
                    }
                }
                function setHue(hue) {
                    if (parseInt(hue) > 0) {
                        document.documentElement.style.setProperty("--hue-rotated", hue)
                        document.documentElement.style.filter = `hue-rotate(calc(var(--hue-rotated) * 1deg))`;
                    } else {
                        document.documentElement.style.removeProperty("--hue-rotated");
                        document.documentElement.style.filter = "none";
                    }
                }
                function getRuntimeEnvironment() {
                    if (location.hostname === "localhost" || location.hostname.includes("gitpod") || location.hostname.includes("github.dev")) return "dev";
                    else {
                        let possiblePreviewURL = location.hostname.match(/vocabustudyonline--([\d\w-]*)\.web\.app/);
                        if (possiblePreviewURL) {
                            let previewParts = possiblePreviewURL[1].split("-");
                            previewParts.pop();
                            return previewParts.join("-");
                        }
                    }
                    return null;
                }
                addEventListener("DOMContentLoaded", () => {
                    navbar.burger.addEventListener("click", () => {
                        navbar.burger.classList.toggle("is-active");
                        navbar.menu.classList.toggle("is-active");
                    });
                    navbar.menu.addEventListener("click", () => {
                        navbar.burger.classList.remove("is-active");
                        navbar.menu.classList.remove("is-active");
                    });
                    fabs.themeOptions.forEach((el, i) => {
                        el.addEventListener("click", () => {
                            showTheme(themes[i]);
                            localStorage.setItem("theme", themes[i]);
                        });
                    });
                    navbar.btnLogout.addEventListener("click", () => window.signOut());
                    let possibleRuntimeEnvironment = getRuntimeEnvironment();
                    if (possibleRuntimeEnvironment) {
                        let versionSpan = document.querySelector("body > footer.footer span");
                        versionSpan.innerText = "";
                        let tag = versionSpan.appendChild(document.createElement("span"));
                        tag.classList.add("tag", possibleRuntimeEnvironment === "dev" ? "is-warning" : "is-info");
                        tag.innerText = possibleRuntimeEnvironment;
                    }
                });

                let userPrefersDark = matchMedia("(prefers-color-scheme: dark)");
                document.documentElement.classList.toggle("prefers-dark", userPrefersDark.matches);
                userPrefersDark.addEventListener("change", e => document.documentElement.classList.toggle("prefers-dark", e.matches));

                fabs.theme.addEventListener("click", e => {
                    e.stopPropagation();
                    fabs.themeContainer.classList.toggle("show")
                }, true);
                document.addEventListener("click", () => fabs.themeContainer.classList.remove("show"));
                document.querySelector("#btn-logout + a.loggedout").addEventListener("click", () => localStorage.removeItem("redirect_after_login"));
                if (!("randomUUID" in crypto))
                    crypto.randomUUID = () => ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));
                navigator.serviceWorker.register(new URL("./service-worker.js", location.origin) , {type: "module", scope: "/"});